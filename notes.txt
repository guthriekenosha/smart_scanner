
cd ~/smart_scanner

nano smart_scanner/.env.local 

BLOFIN_BASE_URL=https://openapi.blofin.com
BLOFIN_WS_PRIVATE=wss://openapi.blofin.com/ws/private
BLOFIN_WS_PUBLIC=wss://openapi.blofin.com/ws/public
BLOFIN_API_KEY=6ada259fe4a34a3bb1b44217048cd045
BLOFIN_API_SECRET=698ad4a6c8794c469f7b216e2b7b07f1
BLOFIN_API_PASSPHRASE=leverage

#Prefer WS-driven universe and candles
UNIVERSE_FROM_WS=1
USE_WS_CANDLES=1

#Universe hygiene
SWAP_ONLY=1
BLUECHIP_ONLY=0


#Liquidity/quality gates
MIN_QUOTE_VOL_USDT=400000
MIN_LAST_PRICE=0.02
TOP_SYMBOLS=200
SIGNAL_MIN_QVOL_USDT=400000

#Strategy gating
REQUIRE_MULTI_COMPONENTS=1
MIN_COMPONENTS=2
SCORE_MIN=6

#Risk/margin safety
MIN_INITIAL_MARGIN_USD=40
CHECK_BALANCE_BEFORE_ORDER=1
UPSIZE_TO_MIN_MARGIN=1
ENFORCE_MIN_MARGIN=1
ENFORCE_MIN_MARGIN_ACTION=close
SINGLE_POSITION_PER_SYMBOL=1
ENABLE_SMART_RISK=1
LEV_MIN=3
LEV_MAX=3
LEV_BASE=3
LEV_K_CONF=0
LEV_K_VOL=0

#Orderflow (leave off for now)
USE_WS_ORDERFLOW=0
ORDERFLOW_STRICT=1
OF_READY_MIN_TRADES=1
OF_READY_MAX_AGE_SEC=180
WS_BOOK_DEPTH=10
MAX_SPREAD_BPS=12.0
MIN_TRADES_PER_MIN=0.3
MIN_NOTIONAL_PER_MIN_USD=5000
MIN_DEPTH_NOTIONAL_USD=10000
ORDERFLOW_WINDOW_SEC=120

#Metrics + persistence (use the container volume)
METRICS_ENABLED=1
METRICS_PATH=/data/scanner_metrics.jsonl
BANDIT_STATE_PATH=/data/bandit_state.json
UNIVERSE_CACHE_PATH=/data/.universe_cache.json
CALIBRATION_PATH=/data/calibration.json
PRINT_DIAGNOSTICS=1

#Trading (live)
ENABLE_AUTOTRADE=1
PAPER_TRADING=0
TRADING_MARGIN_MODE=cross
TRADING_POSITION_MODE=net
TRADING_LEVERAGE=3
ENABLE_PRIVATE_WS=1

#TP/SL
ENABLE_TPSL=1
ENABLE_SMART_TPSL=1
TP_BPS=80
SL_BPS=50
TRIGGER_EPS_BPS=8
TPSL_RETRY_ON_FAIL=1
TPSL_RETRY_MULT=3.0
TPSL_RETRY_TRIGGER_TYPE=mark
ATR_TP1_MULT=2.2
ATR_TP2_MULT=4.0
SCALE_OUT_PCT1=0.3
SCALE_OUT_PCT2=0.7

#Trailing / Break-even
ENABLE_TRAILING=1
BREAK_EVEN_AFTER_R=1.5
BREAK_EVEN_BUFFER_BPS=6
TRAIL_MODE=atr
TRAIL_ATR_MULT=1.3
TRAIL_MIN_STEP_BPS=10
MOVE_SL_BE_ON_TP1=0

#Sizing / limits
TRADE_NOTIONAL_USD=70
TRADE_MAX_POSITIONS=2
TRADE_MAX_EXPOSURE_USD=240
TRADE_COOLDOWN_SEC=120

TRADE_MIN_SCORE=6
TRADE_MIN_PROB=0.62
ORDER_SLIPPAGE_BPS=8.0

#Regime awareness
REGIME_AWARE=1
REGIME_TPSL_SHRINK_IN_PANIC=0.6
REGIME_SCORE_BOOST_TREND=0.35
REGIME_SCORE_PENALTY_CHOP=0.25

#EMA slope
EMA_SLOPE_LEN=21
EMA_SLOPE_LOOKBACK=8

#Regime knobs
REGIME_ADX_LEN=14
REGIME_ATR_LEN=14
REGIME_PANIC_ATR_MULT=3.5
REGIME_CHOP_ADX_MAX=18
REGIME_TREND_ADX_MIN=20



Recreate to reload env:
docker compose -f compose.prod.yaml up -d --force-recreate

Verify key envs:
docker compose -f compose.prod.yaml exec scanner env | grep -E 'ENABLE_AUTOTRADE|PAPER_TRADING|METRICS_PATH|MIN_LAST_PRICE'


Tail logs:
docker compose -f compose.prod.yaml logs -f --tail=200


Generating public/private rsa key pair.
Enter passphrase for "/Users/kenoshaguthrie/.ssh/google_compute_engine" (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /Users/kenoshaguthrie/.ssh/google_compute_engine
Your public key has been saved in /Users/kenoshaguthrie/.ssh/google_compute_engine.pub
The key fingerprint is:
SHA256:+wgmDhoBWKhqjlKtNJnPh5ENjI2LaGjjvDdPsgUnLQM kenoshaguthrie@Kenoshas-MacBook-Air.local
The key's randomart image is:
+---[RSA 3072]----+
| ..              |
|o.               |
|+E =             |
|o + =            |
|=. X *  S        |
|=*B X .  .       |
|Xoo*.=o .        |
|o*.=Oo.. o       |
|o.o.+o  . .      |
+----[SHA256]-----+
Updating project ssh metadata...â ¼Updated [https://www.googleapis.com/compute/v1/projects/autobot-447221].
Updating project ssh metadata...done.                             
Waiting for SSH key to propagate.
Warning: Permanently added 'compute.151948292355273227' (ED25519) to the list of known hosts.
Enter passphrase for key '/Users/kenoshaguthrie/.ssh/google_compute_engine': 
Enter passphrase for key '/Users/kenoshaguthrie/.ssh/google_compute_engine': 
Linux trader 6.1.0-37-cloud-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.1.140-1 (2025-05-22) x86_64

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Sun Sep  7 15:54:47 2025 from 35.235.244.33


git add -A
git commit -m "Dashboard Indicators"
git push -u origin main


Right now my profits with my TP1 and TP2 are low returns for example UNIUSDT(price$9.29)has margin $54.54 with 3x leverage, TP1 $0.04,$0.19, and SL $2.19

