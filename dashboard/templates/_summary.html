<div class="grid grid-cols-1 md:grid-cols-4 gap-4">
  <div class="bg-white rounded shadow p-4">
    <div class="text-xs text-gray-500">Balance</div>
    <div class="mt-1 text-lg font-semibold">
      {{ (summary.equity or 0) | round(2) }} USDT
      <span class="text-sm text-gray-500">(avail {{ (summary.available or 0) | round(2) }})</span>
    </div>
    <div class="text-xs text-gray-500 mt-1">Last order {{ summary.last_order_ts | ago }}</div>
  </div>
  <div class="bg-white rounded shadow p-4">
    <div class="text-xs text-gray-500">Exposure</div>
    <div class="mt-1 text-lg font-semibold">
      {% if summary.exposure is not none %}
        {{ summary.exposure | round(2) }} USDT
      {% else %}
        —
      {% endif %}
    </div>
    <div class="text-xs text-gray-500 mt-1">Last signal {{ summary.last_signal_ts | ago }}</div>
  </div>
  <div class="bg-white rounded shadow p-4">
    <div class="text-xs text-gray-500">Error Rate (1h)</div>
    <div class="mt-1 text-lg font-semibold">
      {{ '%.1f'|format(summary.err_rate or 0) }}%
    </div>
    <div class="text-xs text-gray-500 mt-1 flex items-center gap-2">
      <span>Last error {{ summary.last_error_ts | ago }}</span>
      <label class="ml-auto text-gray-400 text-[11px]">Window</label>
      <select id="summary_mins" name="mins" class="border rounded px-1 py-0.5 text-xs"
              hx-get="/partials/summary" hx-trigger="change" hx-target="#summary" hx-swap="outerHTML">
        {% set m = summary.window_mins or 60 %}
        <option value="15" {% if m == 15 %}selected{% endif %}>15m</option>
        <option value="30" {% if m == 30 %}selected{% endif %}>30m</option>
        <option value="60" {% if m == 60 %}selected{% endif %}>60m</option>
        <option value="120" {% if m == 120 %}selected{% endif %}>2h</option>
        <option value="240" {% if m == 240 %}selected{% endif %}>4h</option>
      </select>
    </div>
  </div>
  <div class="bg-white rounded shadow p-4">
    <div class="text-xs text-gray-500">Hold Time Today</div>
    <div class="mt-1 text-lg font-semibold">{{ '%.1f'|format((summary.hold_avg_sec or 0)/60) }} min avg</div>
    <div class="mt-2">
      <table class="text-xs w-full">
        <thead class="text-gray-500">
          <tr>
            <th class="p-1">&lt;1m</th>
            <th class="p-1">1–5m</th>
            <th class="p-1">5–15m</th>
            <th class="p-1">15m+</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="p-1 text-center">{{ summary.hold_buckets['lt1'] if summary.hold_buckets else 0 }}</td>
            <td class="p-1 text-center">{{ summary.hold_buckets['m1_5'] if summary.hold_buckets else 0 }}</td>
            <td class="p-1 text-center">{{ summary.hold_buckets['m5_15'] if summary.hold_buckets else 0 }}</td>
            <td class="p-1 text-center">{{ summary.hold_buckets['+15'] if summary.hold_buckets else 0 }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
