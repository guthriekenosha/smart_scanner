<div class="overflow-auto max-h-96">
  <table class="min-w-full text-sm">
    <thead class="bg-gray-100 sticky top-0">
      <tr>
        <th class="p-2">Time</th>
        <th class="p-2">Symbol</th>
        <th class="p-2">Side</th>
        <th class="p-2">Size</th>
        <th class="p-2">Entry</th>
        <th class="p-2">Mark</th>
        <th class="p-2">SL</th>
        <th class="p-2">PnL</th>
      </tr>
    </thead>
    <tbody>
      {% for p in positions %}
      <tr class="border-b hover:bg-gray-50">
        <td class="p-2 text-xs text-gray-500">{{ p.ts | ago }}</td>
        <td class="p-2 whitespace-nowrap">{{ p.symbol }}</td>
        <td class="p-2 text-center">
          <span class="px-2 py-0.5 rounded-full text-xs font-medium {% if p.side in ['buy','long'] %} bg-blue-100 text-blue-700 {% elif p.side in ['sell','short'] %} bg-yellow-100 text-yellow-700 {% else %} bg-gray-100 text-gray-700 {% endif %}">{{ p.side }}</span>
        </td>
        <td class="p-2 text-right">{{ '%.6f'|format(p.size or 0) }}</td>
        <td class="p-2 text-right">{{ '%.6g'|format(p.entry or 0) }}</td>
        <td class="p-2 text-right">{{ '%.6g'|format(p.mark or 0) }}</td>
        <td class="p-2 text-right">{{ p.sl or 'â€”' }}</td>
        <td class="p-2 text-right {% if (p.pnl_u or 0) >= 0 %} text-green-700 {% else %} text-red-700 {% endif %}">{{ '%.4f'|format(p.pnl_u or 0) }}</td>
      </tr>
      {% else %}
      <tr><td colspan="8" class="p-2 text-gray-500">No open positions</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

